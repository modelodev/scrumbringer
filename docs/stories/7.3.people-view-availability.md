# Story 7.3: Vista Personas (disponibilidad por proyecto)

## Status

Draft

## Story

**As a** miembro del proyecto,
**I want** ver rapidamente quien esta trabajando, ocupado o libre,
**so that** pueda coordinar mejor las tareas del proyecto.

## Problem Statement

No existe una vista principal para visualizar disponibilidad por persona. El estado “en curso” solo se ve en el panel derecho, y no hay una forma clara de ver la carga del equipo por proyecto.

---

## Acceptance Criteria

1. Se agrega una vista **Personas** en la seccion TRABAJO (despues de Pool/Lista/Tarjetas).
2. La vista es accesible para todos los miembros del proyecto.
3. Existe barra de busqueda para filtrar por nombre.
4. Cada persona muestra estado principal con chip sutil: `Trabajando…`, `Ocupado`, `Libre`.
5. Al expandir (triangulito), se muestran:
   - Seccion **Activa** (si existe) con etiqueta clara.
   - Seccion **Reclamadas** con lista compacta.
6. El estado principal sigue estas reglas:
   - `Trabajando…`: tiene sesion activa.
   - `Ocupado`: tiene tareas reclamadas sin sesion activa.
   - `Libre`: sin sesion activa y sin tareas reclamadas.

---

## Tasks / Subtasks

- [ ] **Task 1: Navegacion y ruta** (AC: 1, 2)
  - [ ] 1.1 Agregar item “Personas” en TRABAJO.
  - [ ] 1.2 Incluir ruta en router y estado de vista.

- [ ] **Task 2: Vista Personas** (AC: 3-6)
  - [ ] 2.1 Construir lista con busqueda.
  - [ ] 2.2 Calcular estado principal segun reglas.
  - [ ] 2.3 Implementar expand/collapse con triangulito consistente.
  - [ ] 2.4 Render de secciones Activa/Reclamadas.

- [ ] **Task 3: Styles y chips sutiles** (AC: 4)
  - [ ] 3.1 Reutilizar `badge` con variantes sutiles de estado.
  - [ ] 3.2 Ajustar estilos para filas compactas y legibles.

- [ ] **Task 4: Tests** (AC: 1-6)
  - [ ] 4.1 Tests de vista para reglas de estado.
  - [ ] 4.2 Tests de expand/collapse.

---

## Dev Notes

### Archivos clave (frontend)

```
apps/client/src/scrumbringer_client/features/layout/left_panel.gleam
apps/client/src/scrumbringer_client/client_view.gleam
apps/client/src/scrumbringer_client/router.gleam
apps/client/src/scrumbringer_client/features/people/view.gleam (nuevo)
apps/client/src/scrumbringer_client/features/people/state.gleam (nuevo)
apps/client/src/scrumbringer_client/features/people/msg.gleam (nuevo)
apps/client/src/scrumbringer_client/features/people/update.gleam (nuevo)
apps/client/src/scrumbringer_client/styles.gleam
apps/client/src/scrumbringer_client/ui/badge.gleam
```

### UX Design

- Sin avatar/iniciales; nombre como elemento principal.
- Chips sutiles (borde + texto) para estado.
- Expand con triangulito consistente con otras vistas.

### Refactor Alignment (docs/architecture/refactor-plan-detailed.md)

- Nuevo feature completo `features/people/*` (state/msg/update/view).
- `client_view` solo ensambla; `client_update` solo enruta.
- Considerar integracion futura con `url_state` si la busqueda se vuelve compartida.

### Type Notes (gleam-type-system)

- Definir `Availability = Working | Busy | Free` y `PersonStatus` con `Option(Task)` para activa.

---

## Testing

- Tests de vista en `apps/client/test`.

### TDD (gleam-tdd-development)

- Definir tipos de estado y firmas primero.
- Escribir tests de reglas de estado y expand/collapse antes de implementar.

---

## Out of Scope

- Panel derecho de trabajo en curso.
- Avatares o imagenes de usuario.
- Indicadores avanzados de carga (puntos/porcentaje).

---

## Change Log

| Fecha | Version | Descripcion | Autor |
|-------|---------|-------------|-------|
| 2026-02-05 | 1.0 | Historia creada para sprint 7 | UX/PO |

---

## Dev Agent Record

### Agent Model Used

openai/gpt-5.2-codex

### Debug Log References

- TBD

### Completion Notes List

- TBD

### File List

- TBD

---

## QA Results

### Review Date: TBD

### Reviewed By: TBD

### Gate Status

Gate: TBD
