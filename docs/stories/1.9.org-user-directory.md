# Story 1.9: Org User Directory (Search by Email)

## Status
Approved

## Story
**As a** project admin,
**I want** to search and list users in the organization,
**so that** I can add them to projects without needing internal IDs or database access.

## Acceptance Criteria
1. **Endpoint exists**: `GET /api/v1/org/users` exists.
2. **Authorization**: `GET /api/v1/org/users` is allowed for org admins and project admins; non-authorized users are rejected with `403 FORBIDDEN`.
3. **Org scoping**: The endpoint returns only users in the caller’s organization.
4. **Sorting**: Results are sorted by `email ASC`.
5. **Search**: Optional query `q` filters by email only.
6. **Response shape**: Response is `200` `{ data: { users: User[] } }` and each user includes at least `{ id, email, org_role, created_at }`.

## Tasks / Subtasks
- [ ] Add endpoint contract + authz rules to API layer (AC: 1, 2)
- [ ] Implement org scoping and sorting/search (AC: 3, 4, 5)
- [ ] Add tests:
  - [ ] org scoping (cannot see users from other org) (AC: 3)
  - [ ] authorization checks (AC: 2)
  - [ ] sorting + search behavior (AC: 4, 5)

## Dev Notes
Source of truth:
- API contract: `docs/architecture/api-contract.md` (Organization → Users, Authorization Matrix).

Why this is needed for usability:
- Membership endpoints use `user_id`; without a directory/search, admins cannot reliably discover `user_id` to add members.

### Testing
- Use `gleeunit`.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-12 | 1.0 | Initial draft | architect |
| 2026-01-12 | 1.1 | Approved for implementation (unblocks onboarding and membership management UX) | architect |

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results
