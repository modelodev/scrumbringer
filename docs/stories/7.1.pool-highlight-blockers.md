# Story 7.1: Resaltado de bloqueadores en Pool

## Status

Draft

## Story

**As a** miembro del proyecto,
**I want** identificar visualmente las tareas que bloquean la tarea que estoy viendo,
**so that** pueda entender el bloqueo sin buscar manualmente.

## Problem Statement

En Pool, una tarea bloqueada solo muestra un indicador y el detalle aparece en hover, pero no es evidente que tareas concretas son las bloqueadoras en el canvas. Esto obliga a buscar una por una y aumenta el tiempo de decisión.

---

## Acceptance Criteria

1. Al **hover** o **focus** de una tarea bloqueada, las tareas bloqueadoras visibles en el Pool quedan resaltadas.
2. El resaltado es **estático** (solo borde/halo), sin animaciones.
3. El resaltado se apaga al salir del hover/focus.
4. Si hay tareas bloqueadoras fuera de vista por filtros, se muestra un mensaje en el hover: “X bloqueadoras fuera de vista por filtros”.
5. Se implementa un **patrón reutilizable de highlight** con clases genéricas (`is-highlight-source`, `is-highlight-target`, `is-highlight-dimmed`) y variantes de intención.

---

## Tasks / Subtasks

- [ ] **Task 1: Modelo de highlight reutilizable** (AC: 2, 5)
  - [ ] 1.1 Definir clases CSS base y variantes de intención (warning/info/success).
  - [ ] 1.2 Aplicar estilo de borde/halo sutil sin animaciones.

- [ ] **Task 2: Resaltado de bloqueadores en Pool** (AC: 1, 3, 4)
  - [ ] 2.1 Detectar hover/focus en tareas bloqueadas.
  - [ ] 2.2 Marcar tareas bloqueadoras visibles con `is-highlight-target`.
  - [ ] 2.3 Limpiar estado al salir del hover/focus.
  - [ ] 2.4 Mostrar aviso de bloqueadoras fuera de vista por filtros.

- [ ] **Task 3: Tests** (AC: 1-5)
  - [ ] 3.1 Test de view: tareas bloqueadoras reciben clase de highlight.
  - [ ] 3.2 Test de view: aviso visible cuando hay bloqueadoras fuera de vista.

---

## Dev Notes

### Archivos clave (frontend)

```
apps/client/src/scrumbringer_client/features/pool/view.gleam
apps/client/src/scrumbringer_client/features/pool/state.gleam
apps/client/src/scrumbringer_client/features/pool/msg.gleam
apps/client/src/scrumbringer_client/ui/task_item.gleam (si se reutiliza)
apps/client/src/scrumbringer_client/styles.gleam
```

### UX Design

- **Tarea origen (bloqueada):** `is-highlight-source highlight-warning`
- **Tareas bloqueadoras:** `is-highlight-target highlight-warning`
- **Resto (opcional):** `is-highlight-dimmed` (si se decide atenuar)
- Sin animaciones, solo borde/halo.

### Refactor Alignment (docs/architecture/refactor-plan-detailed.md)

- Mantener MVU por feature: la logica de highlight vive en `features/pool/*`.
- Evitar nuevas dependencias en `client_state`/`client_update`/`client_view`.
- Helpers nuevos deben ir a `scrumbringer_client/helpers/*` o usar `update_helpers` como facade temporal.

### Type Notes (gleam-type-system)

- Introducir ADT para estado de highlight (ej. `Highlight = None | Blocked(task_id, blockers)`), evitando flags sueltos.

### Componentes UI

- Usar patrones existentes en `ui/` y estilos definidos en `styles.gleam`.

---

## Testing

- Tests de vista en `apps/client/test` para clases de highlight.
- Verificar que hover/focus no rompe el popup existente.

### TDD (gleam-tdd-development)

- Definir firmas y ADTs primero.
- Escribir tests de view/update antes de implementar la logica.

---

## Out of Scope

- Animaciones o transiciones avanzadas.
- Resaltado fuera del Pool (Lista/Kanban).

---

## Change Log

| Fecha | Version | Descripcion | Autor |
|-------|---------|-------------|-------|
| 2026-02-05 | 1.0 | Historia creada para sprint 7 | UX/PO |

---

## Dev Agent Record

### Agent Model Used

openai/gpt-5.2-codex

### Debug Log References

- TBD

### Completion Notes List

- TBD

### File List

- TBD

---

## QA Results

### Review Date: TBD

### Reviewed By: TBD

### Gate Status

Gate: TBD
