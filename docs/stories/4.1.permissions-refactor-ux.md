# Story 4.1: Permissions Refactor - UX Specification

## Overview

This document defines the UI/UX changes required for the permissions refactor (Story 4.1). The goal is to create a clear, consistent, and intuitive interface that reflects the new role hierarchy.

---

## Role Hierarchy

```
Org Admin (users.org_role = 'admin')
    â”‚
    â”œâ”€â”€ Full organization access
    â”œâ”€â”€ Implicit Manager on all projects
    â”‚
    â–¼
Project Manager (project_members.role = 'manager')
    â”‚
    â”œâ”€â”€ Project-scoped management
    â”œâ”€â”€ Can add Members (not Managers)
    â”‚
    â–¼
Project Member (project_members.role = 'member')
    â”‚
    â””â”€â”€ Task work only (Pool, My Bar, Skills, Fichas)
```

---

## Layout Structure

### Principle: No Header, Dual Sidebars

The application uses a **three-column layout** with no traditional header:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚                                        â”‚                     â”‚
â”‚   LEFT SIDEBAR      â”‚              CONTENT                   â”‚   RIGHT SIDEBAR     â”‚
â”‚   (Navigation)      â”‚              (Variable)                â”‚   (Work Panel)      â”‚
â”‚                     â”‚                                        â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Left Sidebar: Navigation

### Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸŽ¯ ScrumBringer    â”‚  Logo/App name
â”‚                     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                     â”‚
â”‚  ðŸ“ PROYECTO        â”‚  Project context section
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [Project â–¼]   â”‚  â”‚  Project selector dropdown
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  ðŸŸ£ Manager         â”‚  User's role in selected project
â”‚                     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                     â”‚
â”‚  NAVEGACIÃ“N         â”‚  Main navigation
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ðŸŠ Pool            â”‚
â”‚  ðŸ‘¤ Mi barra        â”‚
â”‚  ðŸŽ¯ Mis skills      â”‚
â”‚  ðŸ“‹ Fichas          â”‚
â”‚                     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                     â”‚
â”‚  âš™ï¸ ADMINISTRACIÃ“N  â”‚  Admin section (collapsible)
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  Only visible if user has permissions
â”‚                     â”‚
â”‚  ðŸ¢ OrganizaciÃ³n    â”‚  Only for Org Admin
â”‚  â”œâ”€ Invitaciones    â”‚
â”‚  â”œâ”€ ConfiguraciÃ³n   â”‚
â”‚  â”œâ”€ Proyectos       â”‚
â”‚  â”œâ”€ MÃ©tricas        â”‚
â”‚  â””â”€ MÃ©tricas reglas â”‚
â”‚                     â”‚
â”‚  ðŸ“ Proyecto        â”‚  For Manager or Org Admin
â”‚  â”œâ”€ Miembros        â”‚
â”‚  â”œâ”€ Capacidades     â”‚
â”‚  â”œâ”€ Tipos de tarea  â”‚
â”‚  â”œâ”€ Fichas (gest.)  â”‚
â”‚  â”œâ”€ Automatizacionesâ”‚
â”‚  â””â”€ Plantillas      â”‚
â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Visibility Rules

| Section | Org Admin | Project Manager | Member |
|---------|-----------|-----------------|--------|
| Project selector | âœ… All projects | âœ… Their projects | âœ… Their projects |
| Role badge | âœ… | âœ… | âœ… |
| Navigation (Pool, etc.) | âœ… | âœ… | âœ… |
| Admin section | âœ… | âœ… | âŒ Hidden |
| Admin > OrganizaciÃ³n | âœ… | âŒ Hidden | âŒ Hidden |
| Admin > Proyecto | âœ… | âœ… | âŒ Hidden |

### Project Role Badge

Display user's role in the currently selected project:

| Role | Badge |
|------|-------|
| Manager | ðŸŸ£ Manager |
| Member | ðŸ”µ Miembro |
| No membership (Org Admin viewing) | ðŸŸ¡ Org Admin |

---

## Right Sidebar: Work Panel

### Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ‘¤ user@example.com    â”‚  User identity
â”‚  ðŸŸ£ Org Admin           â”‚  Organization role
â”‚  ðŸŒ™  ðŸŒ                 â”‚  Theme & language toggles
â”‚                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                         â”‚
â”‚  â–¶ AHORA TRABAJANDO     â”‚  Active task section
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                         â”‚
â”‚  [Active task card]     â”‚  Shows current task with timer
â”‚                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                         â”‚
â”‚  ðŸ“‹ MIS TAREAS (n)      â”‚  Claimed tasks section
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                         â”‚
â”‚  [List of claimed       â”‚
â”‚   tasks with actions]   â”‚
â”‚                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                         â”‚
â”‚  [Salir]                â”‚  Logout button at bottom
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Active Task Card

When working on a task:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ› Fix login bug       â”‚  Task type icon + title
â”‚                         â”‚
â”‚     â± 00:23:45          â”‚  Live timer
â”‚                         â”‚
â”‚  [â¸ Pausar]             â”‚  Pause button
â”‚  [âœ“ Completar]          â”‚  Complete button
â”‚  [â†© Liberar]            â”‚  Release button
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

When no task is active:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ðŸ˜´              â”‚
â”‚    Sin tarea activa     â”‚
â”‚                         â”‚
â”‚    Selecciona una de    â”‚
â”‚    abajo para empezar   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Claimed Tasks List

Each task row:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ”§ Implement API       â”‚  Task type icon + title
â”‚     [â–¶] [âœ“] [â†©]        â”‚  Start / Complete / Release
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

When no tasks claimed:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ðŸŠ              â”‚
â”‚    Sin tareas           â”‚
â”‚                         â”‚
â”‚    Ve al Pool para      â”‚
â”‚    reclamar tareas      â”‚
â”‚                         â”‚
â”‚    [Ir al Pool â†’]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Admin Section: Organization

Only visible to **Org Admin**.

### Subsections

| Subsection | Description |
|------------|-------------|
| Invitaciones | Manage invite links |
| ConfiguraciÃ³n | Organization settings |
| Proyectos | Create/manage projects |
| MÃ©tricas | Organization-wide metrics |
| MÃ©tricas de reglas | Rule execution metrics |

---

## Admin Section: Project

Visible to **Org Admin** and **Project Manager** (for their projects).

### Subsections

| Subsection | Description |
|------------|-------------|
| Miembros | Project members management |
| Capacidades | Project-scoped capabilities |
| Tipos de tarea | Task types for this project |
| Fichas (gestiÃ³n) | Card management |
| Automatizaciones | Workflows (project-scoped) |
| Plantillas | Task templates (project-scoped) |

---

## Members Management UI

### Members Table

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MIEMBROS DEL PROYECTO                          [+ AÃ±adir]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Usuario         â”‚  Rol         â”‚  Desde      â”‚  Acciones     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ana@example.com â”‚  ðŸŸ£ Manager  â”‚  2025-01-15 â”‚  [Cambiar â–¼]  â”‚
â”‚  bob@example.com â”‚  ðŸ”µ Miembro  â”‚  2025-01-18 â”‚  [Cambiar â–¼]  â”‚
â”‚  yo@example.com  â”‚  ðŸŸ£ Manager  â”‚  2025-01-10 â”‚  (tÃº)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Role Badges in Table

| Role | Badge | Color |
|------|-------|-------|
| Manager | ðŸŸ£ Manager | Purple |
| Member | ðŸ”µ Miembro | Blue |

### Actions Column Rules

| Viewer | Target | Can Change Role? |
|--------|--------|------------------|
| Org Admin | Any user | âœ… Yes |
| Org Admin | Themselves | âœ… Yes (if not last manager) |
| Project Manager | Other users | âŒ No (view only) |
| Project Manager | Themselves | âŒ No |

### Add Member Dialog

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AÃ±adir miembro al proyecto                    [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Usuario                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Buscar por email...                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  Rol                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â—‹ Manager                                  â”‚   â”‚
â”‚  â”‚    Puede gestionar miembros, capacidades,   â”‚   â”‚
â”‚  â”‚    tipos de tarea, fichas y automatizacionesâ”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚  â— Miembro                                  â”‚   â”‚
â”‚  â”‚    Puede ver y trabajar en tareas           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                     â”‚
â”‚                     [Cancelar]  [AÃ±adir miembro]    â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Role Selector Visibility

| Viewer | Manager option | Member option |
|--------|----------------|---------------|
| Org Admin | âœ… Visible | âœ… Visible |
| Project Manager | âŒ Hidden | âœ… Visible (pre-selected) |

---

## Empty States

### No Projects Assigned

For users with no project memberships:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     â”‚
â”‚                      ðŸ“                             â”‚
â”‚                                                     â”‚
â”‚           No tienes proyectos asignados             â”‚
â”‚                                                     â”‚
â”‚     Contacta al administrador de tu organizaciÃ³n    â”‚
â”‚     para que te aÃ±ada a un proyecto.                â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### No Admin Permissions

For members trying to access admin (shouldn't happen with proper nav hiding):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     â”‚
â”‚                      ðŸ”’                             â”‚
â”‚                                                     â”‚
â”‚              Sin permisos de gestiÃ³n                â”‚
â”‚                                                     â”‚
â”‚     No tienes permisos para gestionar este          â”‚
â”‚     proyecto. Contacta al manager del proyecto.     â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Mobile Layout

### Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜°  ScrumBringer    ðŸ“ Alpha   â”‚  Compact header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚          CONTENT                â”‚  Main content area
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ”¥ Task name        â± 00:23  â”‚  Work mini-bar (tap to expand)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸŠ      ðŸ‘¤      ðŸŽ¯      ðŸ“‹    â”‚  Bottom navigation
â”‚  Pool    Bar    Skill   Fich   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Left Drawer (â˜°)

Contains:
- Project selector
- Project role badge
- Admin navigation (if permitted)
- Theme/language settings
- User info
- Logout

### Work Mini-Bar

Tap to expand bottom sheet with:
- Active task details + controls
- Claimed tasks list

### Bottom Navigation

4 fixed tabs:
- Pool
- Mi barra
- Mis skills
- Fichas

Admin accessed via drawer only on mobile.

---

## Terminology Changes

### UI Labels

| Old (ES) | New (ES) | Old (EN) | New (EN) |
|----------|----------|----------|----------|
| Admin | Manager | Admin | Manager |
| admin | manager | admin | manager |
| Administrador | Manager | Administrator | Manager |

### i18n Keys to Update

```gleam
// Old
text.RoleAdmin -> "admin"

// New
text.RoleManager -> "manager"
```

---

## Component Architecture

### Lustre Components

The following should be extracted as reusable Lustre components:

1. **LeftSidebar** - Navigation + project context
2. **RightSidebar** - Work panel (user, active task, claimed tasks)
3. **ProjectSelector** - Dropdown with project list
4. **RoleBadge** - Visual badge for roles
5. **ActiveTaskCard** - Current task with timer
6. **ClaimedTasksList** - List of claimed tasks
7. **AddMemberDialog** - Member addition with role selector

---

## Implementation Notes

### CSS Classes

New classes needed:
- `.layout-three-column` - Main layout container
- `.sidebar-left` - Left sidebar
- `.sidebar-right` - Right sidebar (work panel)
- `.role-badge` - Role indicator
- `.role-badge--manager` - Purple variant
- `.role-badge--member` - Blue variant
- `.work-panel` - Right sidebar container
- `.active-task-card` - Current task section
- `.claimed-tasks-list` - Task list section
- `.nav-section` - Collapsible nav section
- `.nav-section--expanded` - Expanded state

### State Requirements

New model fields:
- `admin_section_expanded: Bool` - Admin nav collapse state
- `work_panel_expanded: Bool` - Mobile bottom sheet state

### Accessibility

- All interactive elements must be keyboard navigable
- Role badges should have `aria-label` for screen readers
- Collapsible sections use `aria-expanded`
- Timer has `aria-live="polite"` for updates

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-21 | 1.0 | Initial UX specification | Sally (UX Expert) |
