inventory_version: 1

coverage:
  src_modules_found: 265
  src_modules_inventoried: 265
  complete: yes
  notes: "Inventario completo de los módulos Gleam en apps/server, apps/client y shared."

repo_summary:
  target_runtime: mixed
  packages:
    - name: shared
      path: shared/
      notes: "Pure Gleam domain models and helpers shared between client and server."
    - name: scrumbringer_server
      path: apps/server/
      notes: "BEAM/OTP backend using Mist and Wisp with PostgreSQL (pog)."
    - name: scrumbringer_client
      path: apps/client/
      notes: "JS/Browser frontend using Lustre SPA architecture."
  architectural_notes:
    - "Arquitectura monorepo con dominio compartido."
    - "Servidor BEAM stateless basado en PostgreSQL."
    - "Cliente Lustre (Elm architecture) con normalización de estado."

tag_catalog_used:
  - domain-model
  - dto
  - validation
  - persistence
  - db-query
  - http-server
  - http-client
  - auth
  - crypto
  - jwt
  - orchestration
  - otp
  - supervision
  - normalization
  - i18n
  - testing
  - ui
  - presenter
  - state-machine

module_index:
  - module: scrumbringer_server/http/tasks
    path: apps/server/src/scrumbringer_server/http/tasks.gleam
  - module: scrumbringer_server/http/csrf
    path: apps/server/src/scrumbringer_server/http/csrf.gleam
  - module: scrumbringer_server/http/org_users
    path: apps/server/src/scrumbringer_server/http/org_users.gleam
  - module: scrumbringer_server/http/task_positions
    path: apps/server/src/scrumbringer_server/http/task_positions.gleam
  - module: scrumbringer_server/http/auth
    path: apps/server/src/scrumbringer_server/http/auth.gleam
  - module: scrumbringer_server/http/metrics_presenters
    path: apps/server/src/scrumbringer_server/http/metrics_presenters.gleam
  - module: scrumbringer_server/http/org_metrics
    path: apps/server/src/scrumbringer_server/http/org_metrics.gleam
  - module: scrumbringer_server/http/api
    path: apps/server/src/scrumbringer_server/http/api.gleam
  - module: scrumbringer_server/http/card_notes
    path: apps/server/src/scrumbringer_server/http/card_notes.gleam
  - module: scrumbringer_server/http/card_views
    path: apps/server/src/scrumbringer_server/http/card_views.gleam
  - module: scrumbringer_server/http/org_invite_links
    path: apps/server/src/scrumbringer_server/http/org_invite_links.gleam
  - module: scrumbringer_server/http/task_notes
    path: apps/server/src/scrumbringer_server/http/task_notes.gleam
  - module: scrumbringer_server/http/workflows
    path: apps/server/src/scrumbringer_server/http/workflows.gleam
  - module: scrumbringer_server/http/tasks/conflict_handlers
    path: apps/server/src/scrumbringer_server/http/tasks/conflict_handlers.gleam
  - module: scrumbringer_server/http/tasks/filters
    path: apps/server/src/scrumbringer_server/http/tasks/filters.gleam
  - module: scrumbringer_server/http/tasks/validators
    path: apps/server/src/scrumbringer_server/http/tasks/validators.gleam
  - module: scrumbringer_server/http/tasks/task_types_handlers
    path: apps/server/src/scrumbringer_server/http/tasks/task_types_handlers.gleam
  - module: scrumbringer_server/http/tasks/tasks_get_patch
    path: apps/server/src/scrumbringer_server/http/tasks/tasks_get_patch.gleam
  - module: scrumbringer_server/http/tasks/tasks_list_create
    path: apps/server/src/scrumbringer_server/http/tasks/tasks_list_create.gleam
  - module: scrumbringer_server/http/tasks/tasks_transitions
    path: apps/server/src/scrumbringer_server/http/tasks/tasks_transitions.gleam
  - module: scrumbringer_server/http/tasks/presenters
    path: apps/server/src/scrumbringer_server/http/tasks/presenters.gleam
  - module: scrumbringer_server/http/tasks/task_dependencies
    path: apps/server/src/scrumbringer_server/http/tasks/task_dependencies.gleam
  - module: scrumbringer_server/http/password_resets
    path: apps/server/src/scrumbringer_server/http/password_resets.gleam
  - module: scrumbringer_server/http/cards
    path: apps/server/src/scrumbringer_server/http/cards.gleam
  - module: scrumbringer_server/http/org_invites
    path: apps/server/src/scrumbringer_server/http/org_invites.gleam
  - module: scrumbringer_server/http/projects
    path: apps/server/src/scrumbringer_server/http/projects.gleam
  - module: scrumbringer_server/http/work_sessions
    path: apps/server/src/scrumbringer_server/http/work_sessions.gleam
  - module: scrumbringer_server/http/authorization
    path: apps/server/src/scrumbringer_server/http/authorization.gleam
  - module: scrumbringer_server/http/task_views
    path: apps/server/src/scrumbringer_server/http/task_views.gleam
  - module: scrumbringer_server/http/capabilities
    path: apps/server/src/scrumbringer_server/http/capabilities.gleam
  - module: scrumbringer_server/http/me_metrics
    path: apps/server/src/scrumbringer_server/http/me_metrics.gleam
  - module: scrumbringer_server/http/metrics_service
    path: apps/server/src/scrumbringer_server/http/metrics_service.gleam
  - module: scrumbringer_server/http/rule_metrics
    path: apps/server/src/scrumbringer_server/http/rule_metrics.gleam
  - module: scrumbringer_server/http/rules
    path: apps/server/src/scrumbringer_server/http/rules.gleam
  - module: scrumbringer_server/http/task_templates
    path: apps/server/src/scrumbringer_server/http/task_templates.gleam
  - module: scrumbringer_server/services/store_state
    path: apps/server/src/scrumbringer_server/services/store_state.gleam
  - module: scrumbringer_server/services/task_templates_db
    path: apps/server/src/scrumbringer_server/services/task_templates_db.gleam
  - module: scrumbringer_server/services/work_sessions_db
    path: apps/server/src/scrumbringer_server/services/work_sessions_db.gleam
  - module: scrumbringer_server/services/card_notes_db
    path: apps/server/src/scrumbringer_server/services/card_notes_db.gleam
  - module: scrumbringer_server/services/service_error
    path: apps/server/src/scrumbringer_server/services/service_error.gleam
  - module: scrumbringer_server/services/auth_logic
    path: apps/server/src/scrumbringer_server/services/auth_logic.gleam
  - module: scrumbringer_server/services/capabilities_db
    path: apps/server/src/scrumbringer_server/services/capabilities_db.gleam
  - module: scrumbringer_server/services/org_invite_links_db
    path: apps/server/src/scrumbringer_server/services/org_invite_links_db.gleam
  - module: scrumbringer_server/services/org_users_db
    path: apps/server/src/scrumbringer_server/services/org_users_db.gleam
  - module: scrumbringer_server/services/rule_metrics_db
    path: apps/server/src/scrumbringer_server/services/rule_metrics_db.gleam
  - module: scrumbringer_server/services/rules_target
    path: apps/server/src/scrumbringer_server/services/rules_target.gleam
  - module: scrumbringer_server/services/user_task_views_db
    path: apps/server/src/scrumbringer_server/services/user_task_views_db.gleam
  - module: scrumbringer_server/services/password
    path: apps/server/src/scrumbringer_server/services/password.gleam
  - module: scrumbringer_server/services/password_resets_db
    path: apps/server/src/scrumbringer_server/services/password_resets_db.gleam
  - module: scrumbringer_server/services/rate_limit
    path: apps/server/src/scrumbringer_server/services/rate_limit.gleam
  - module: scrumbringer_server/services/task_notes_db
    path: apps/server/src/scrumbringer_server/services/task_notes_db.gleam
  - module: scrumbringer_server/services/task_positions_db
    path: apps/server/src/scrumbringer_server/services/task_positions_db.gleam
  - module: scrumbringer_server/services/time
    path: apps/server/src/scrumbringer_server/services/time.gleam
  - module: scrumbringer_server/services/workflows/authorization
    path: apps/server/src/scrumbringer_server/services/workflows/authorization.gleam
  - module: scrumbringer_server/services/workflows/types
    path: apps/server/src/scrumbringer_server/services/workflows/types.gleam
  - module: scrumbringer_server/services/workflows/validation
    path: apps/server/src/scrumbringer_server/services/workflows/validation.gleam
  - module: scrumbringer_server/services/workflows/validation_core
    path: apps/server/src/scrumbringer_server/services/workflows/validation_core.gleam
  - module: scrumbringer_server/services/workflows/handlers
    path: apps/server/src/scrumbringer_server/services/workflows/handlers.gleam
  - module: scrumbringer_server/services/rules_engine
    path: apps/server/src/scrumbringer_server/services/rules_engine.gleam
  - module: scrumbringer_server/services/rules_templates
    path: apps/server/src/scrumbringer_server/services/rules_templates.gleam
  - module: support/store
    path: apps/server/test/support/store.gleam
  - module: scrumbringer_server/services/task_events_db
    path: apps/server/src/scrumbringer_server/services/task_events_db.gleam
  - module: scrumbringer_server/services/task_types_db
    path: apps/server/src/scrumbringer_server/services/task_types_db.gleam
  - module: scrumbringer_server/services/workflows_db
    path: apps/server/src/scrumbringer_server/services/workflows_db.gleam
  - module: scrumbringer_server/services/cards_db
    path: apps/server/src/scrumbringer_server/services/cards_db.gleam
  - module: scrumbringer_server/services/task_dependencies_db
    path: apps/server/src/scrumbringer_server/services/task_dependencies_db.gleam
  - module: scrumbringer_server/services/authorization
    path: apps/server/src/scrumbringer_server/services/authorization.gleam
  - module: scrumbringer_server/services/jwt
    path: apps/server/src/scrumbringer_server/services/jwt.gleam
  - module: scrumbringer_server/services/org_invites_db
    path: apps/server/src/scrumbringer_server/services/org_invites_db.gleam
  - module: scrumbringer_server/services/projects_db
    path: apps/server/src/scrumbringer_server/services/projects_db.gleam
  - module: scrumbringer_server/services/rules_db
    path: apps/server/src/scrumbringer_server/services/rules_db.gleam
  - module: scrumbringer_server/services/user_card_views_db
    path: apps/server/src/scrumbringer_server/services/user_card_views_db.gleam
  - module: scrumbringer_server/persistence/auth/login
    path: apps/server/src/scrumbringer_server/persistence/auth/login.gleam
  - module: scrumbringer_server/persistence/auth/queries
    path: apps/server/src/scrumbringer_server/persistence/auth/queries.gleam
  - module: scrumbringer_server/persistence/auth/registration
    path: apps/server/src/scrumbringer_server/persistence/auth/registration.gleam
  - module: scrumbringer_server/persistence/tasks/mappers
    path: apps/server/src/scrumbringer_server/persistence/tasks/mappers.gleam
  - module: scrumbringer_server/persistence/tasks/queries
    path: apps/server/src/scrumbringer_server/persistence/tasks/queries.gleam
  - module: scrumbringer_server/web/router
    path: apps/server/src/scrumbringer_server/web/router.gleam
  - module: scrumbringer_server/seed_db
    path: apps/server/src/scrumbringer_server/seed_db.gleam
  - module: scrumbringer_server/seed
    path: apps/server/src/scrumbringer_server/seed.gleam
  - module: scrumbringer_server/seed_builder
    path: apps/server/src/scrumbringer_server/seed_builder.gleam
  - module: scrumbringer_server/sql
    path: apps/server/src/scrumbringer_server/sql.gleam
  - module: main
    path: apps/server/src/main.gleam
  - module: scrumbringer_server
    path: apps/server/src/scrumbringer_server.gleam
  - module: scrumbringer_client/pool_prefs
    path: apps/client/src/scrumbringer_client/pool_prefs.gleam
  - module: scrumbringer_client/client_view
    path: apps/client/src/scrumbringer_client/client_view.gleam
  - module: scrumbringer_client/styles
    path: apps/client/src/scrumbringer_client/styles.gleam
  - module: scrumbringer_client/i18n/i18n
    path: apps/client/src/scrumbringer_client/i18n/i18n.gleam
  - module: scrumbringer_client/i18n/locale
    path: apps/client/src/scrumbringer_client/i18n/locale.gleam
  - module: scrumbringer_client/i18n/en
    path: apps/client/src/scrumbringer_client/i18n/en.gleam
  - module: scrumbringer_client/i18n/es
    path: apps/client/src/scrumbringer_client/i18n/es.gleam
  - module: scrumbringer_client/i18n/text
    path: apps/client/src/scrumbringer_client/i18n/text.gleam
  - module: scrumbringer_client/components/crud_dialog_base
    path: apps/client/src/scrumbringer_client/components/crud_dialog_base.gleam
  - module: scrumbringer_client/components/truncated_text
    path: apps/client/src/scrumbringer_client/components/truncated_text.gleam
  - module: scrumbringer_client/components/card_crud_dialog
    path: apps/client/src/scrumbringer_client/components/card_crud_dialog.gleam
  - module: scrumbringer_client/components/card_detail_modal
    path: apps/client/src/scrumbringer_client/components/card_detail_modal.gleam
  - module: scrumbringer_client/components/rule_crud_dialog
    path: apps/client/src/scrumbringer_client/components/rule_crud_dialog.gleam
  - module: scrumbringer_client/components/task_template_crud_dialog
    path: apps/client/src/scrumbringer_client/components/task_template_crud_dialog.gleam
  - module: scrumbringer_client/components/task_type_crud_dialog
    path: apps/client/src/scrumbringer_client/components/task_type_crud_dialog.gleam
  - module: scrumbringer_client/components/workflow_crud_dialog
    path: apps/client/src/scrumbringer_client/components/workflow_crud_dialog.gleam
  - module: scrumbringer_client/workspace_state
    path: apps/client/src/scrumbringer_client/workspace_state.gleam
  - module: scrumbringer_client/router
    path: apps/client/src/scrumbringer_client/router.gleam
  - module: scrumbringer_client/theme
    path: apps/client/src/scrumbringer_client/theme.gleam
  - module: scrumbringer_client/update_helpers
    path: apps/client/src/scrumbringer_client/update_helpers.gleam
  - module: scrumbringer_client/state/normalized_store
    path: apps/client/src/scrumbringer_client/state/normalized_store.gleam
  - module: scrumbringer_client/client_ffi
    path: apps/client/src/scrumbringer_client/client_ffi.gleam
  - module: scrumbringer_client/member_section
    path: apps/client/src/scrumbringer_client/member_section.gleam
  - module: scrumbringer_client/assignments_view_mode
    path: apps/client/src/scrumbringer_client/assignments_view_mode.gleam
  - module: scrumbringer_client/decoders
    path: apps/client/src/scrumbringer_client/decoders.gleam
  - module: scrumbringer_client/api/tasks/notes
    path: apps/client/src/scrumbringer_client/api/tasks/notes.gleam
  - module: scrumbringer_client/api/tasks/positions
    path: apps/client/src/scrumbringer_client/api/tasks/positions.gleam
  - module: scrumbringer_client/api/tasks/capabilities
    path: apps/client/src/scrumbringer_client/api/tasks/capabilities.gleam
  - module: scrumbringer_client/api/tasks/operations
    path: apps/client/src/scrumbringer_client/api/tasks/operations.gleam
  - module: scrumbringer_client/api/tasks/task_types
    path: apps/client/src/scrumbringer_client/api/tasks/task_types.gleam
  - module: scrumbringer_client/api/tasks/active
    path: apps/client/src/scrumbringer_client/api/tasks/active.gleam
  - module: scrumbringer_client/api/tasks/decoders
    path: apps/client/src/scrumbringer_client/api/tasks/decoders.gleam
  - module: scrumbringer_client/api/tasks/dependencies
    path: apps/client/src/scrumbringer_client/api/tasks/dependencies.gleam
  - module: scrumbringer_client/api/auth
    path: apps/client/src/scrumbringer_client/api/auth.gleam
  - module: scrumbringer_client/api/core
    path: apps/client/src/scrumbringer_client/api/core.gleam
  - module: scrumbringer_client/api/org
    path: apps/client/src/scrumbringer_client/api/org.gleam
  - module: scrumbringer_client/api/projects
    path: apps/client/src/scrumbringer_client/api/projects.gleam
  - module: scrumbringer_client/api/tasks
    path: apps/client/src/scrumbringer_client/api/tasks.gleam
  - module: scrumbringer_client/api/workflows
    path: apps/client/src/scrumbringer_client/api/workflows.gleam
  - module: scrumbringer_client/api/cards
    path: apps/client/src/scrumbringer_client/api/cards.gleam
  - module: scrumbringer_client/api/metrics
    path: apps/client/src/scrumbringer_client/api/metrics.gleam
  - module: scrumbringer_client/app/effects
    path: apps/client/src/scrumbringer_client/app/effects.gleam
  - module: scrumbringer_client/features/admin/member_add
    path: apps/client/src/scrumbringer_client/features/admin/member_add.gleam
  - module: scrumbringer_client/features/admin/member_remove
    path: apps/client/src/scrumbringer_client/features/admin/member_remove.gleam
  - module: scrumbringer_client/features/admin/org_settings
    path: apps/client/src/scrumbringer_client/features/admin/org_settings.gleam
  - module: scrumbringer_client/features/admin/rule_metrics
    path: apps/client/src/scrumbringer_client/features/admin/rule_metrics.gleam
  - module: scrumbringer_client/features/admin/search
    path: apps/client/src/scrumbringer_client/features/admin/search.gleam
  - module: scrumbringer_client/features/admin/update
    path: apps/client/src/scrumbringer_client/features/admin/update.gleam
  - module: scrumbringer_client/features/admin/views/members
    path: apps/client/src/scrumbringer_client/features/admin/views/members.gleam
  - module: scrumbringer_client/features/admin/views/workflows
    path: apps/client/src/scrumbringer_client/features/admin/views/workflows.gleam
  - module: scrumbringer_client/features/admin/workflows
    path: apps/client/src/scrumbringer_client/features/admin/workflows.gleam
  - module: scrumbringer_client/features/admin/cards
    path: apps/client/src/scrumbringer_client/features/admin/cards.gleam
  - module: scrumbringer_client/features/admin/view
    path: apps/client/src/scrumbringer_client/features/admin/view.gleam
  - module: scrumbringer_client/features/admin/member_release_all
    path: apps/client/src/scrumbringer_client/features/admin/member_release_all.gleam
  - module: scrumbringer_client/features/auth/helpers
    path: apps/client/src/scrumbringer_client/features/auth/helpers.gleam
  - module: scrumbringer_client/features/auth/update
    path: apps/client/src/scrumbringer_client/features/auth/update.gleam
  - module: scrumbringer_client/features/auth/view
    path: apps/client/src/scrumbringer_client/features/auth/view.gleam
  - module: scrumbringer_client/features/capabilities/update
    path: apps/client/src/scrumbringer_client/features/capabilities/update.gleam
  - module: scrumbringer_client/features/i18n/update
    path: apps/client/src/scrumbringer_client/features/i18n/update.gleam
  - module: scrumbringer_client/features/invites/update
    path: apps/client/src/scrumbringer_client/features/invites/update.gleam
  - module: scrumbringer_client/features/invites/view
    path: apps/client/src/scrumbringer_client/features/invites/view.gleam
  - module: scrumbringer_client/features/metrics/update
    path: apps/client/src/scrumbringer_client/features/metrics/update.gleam
  - module: scrumbringer_client/features/metrics/view
    path: apps/client/src/scrumbringer_client/features/metrics/view.gleam
  - module: scrumbringer_client/features/my_bar/view
    path: apps/client/src/scrumbringer_client/features/my_bar/view.gleam
  - module: scrumbringer_client/features/now_working/update
    path: apps/client/src/scrumbringer_client/features/now_working/update.gleam
  - module: scrumbringer_client/features/now_working/mobile
    path: apps/client/src/scrumbringer_client/features/now_working/mobile.gleam
  - module: scrumbringer_client/features/now_working/panel
    path: apps/client/src/scrumbringer_client/features/now_working/panel.gleam
  - module: scrumbringer_client/features/pool/filters
    path: apps/client/src/scrumbringer_client/features/pool/filters.gleam
  - module: scrumbringer_client/features/pool/dialogs
    path: apps/client/src/scrumbringer_client/features/pool/dialogs.gleam
  - module: scrumbringer_client/features/pool/update
    path: apps/client/src/scrumbringer_client/features/pool/update.gleam
  - module: scrumbringer_client/features/pool/view
    path: apps/client/src/scrumbringer_client/features/pool/view.gleam
  - module: scrumbringer_client/features/projects/update
    path: apps/client/src/scrumbringer_client/features/projects/update.gleam
  - module: scrumbringer_client/features/projects/view
    path: apps/client/src/scrumbringer_client/features/projects/view.gleam
  - module: scrumbringer_client/features/skills/update
    path: apps/client/src/scrumbringer_client/features/skills/update.gleam
  - module: scrumbringer_client/features/skills/view
    path: apps/client/src/scrumbringer_client/features/skills/view.gleam
  - module: scrumbringer_client/features/task_types/update
    path: apps/client/src/scrumbringer_client/features/task_types/update.gleam
  - module: scrumbringer_client/features/tasks/view
    path: apps/client/src/scrumbringer_client/features/tasks/view.gleam
  - module: scrumbringer_client/features/tasks/update
    path: apps/client/src/scrumbringer_client/features/tasks/update.gleam
  - module: scrumbringer_client/features/fichas/view
    path: apps/client/src/scrumbringer_client/features/fichas/view.gleam
  - module: scrumbringer_client/features/layout/responsive_drawer
    path: apps/client/src/scrumbringer_client/features/layout/responsive_drawer.gleam
  - module: scrumbringer_client/features/layout/sidebar_state
    path: apps/client/src/scrumbringer_client/features/layout/sidebar_state.gleam
  - module: scrumbringer_client/features/layout/three_panel_layout
    path: apps/client/src/scrumbringer_client/features/layout/three_panel_layout.gleam
  - module: scrumbringer_client/features/layout/view_mode_toggle
    path: apps/client/src/scrumbringer_client/features/layout/view_mode_toggle.gleam
  - module: scrumbringer_client/features/layout/center_panel
    path: apps/client/src/scrumbringer_client/features/layout/center_panel.gleam
  - module: scrumbringer_client/features/layout/left_panel
    path: apps/client/src/scrumbringer_client/features/layout/left_panel.gleam
  - module: scrumbringer_client/features/layout/right_panel
    path: apps/client/src/scrumbringer_client/features/layout/right_panel.gleam
  - module: scrumbringer_client/features/views/grouped_list
    path: apps/client/src/scrumbringer_client/features/views/grouped_list.gleam
  - module: scrumbringer_client/features/views/kanban_board
    path: apps/client/src/scrumbringer_client/features/views/kanban_board.gleam
  - module: scrumbringer_client/features/assignments/components/assignments_card
    path: apps/client/src/scrumbringer_client/features/assignments/components/assignments_card.gleam
  - module: scrumbringer_client/features/assignments/components/project_card
    path: apps/client/src/scrumbringer_client/features/assignments/components/project_card.gleam
  - module: scrumbringer_client/features/assignments/components/user_card
    path: apps/client/src/scrumbringer_client/features/assignments/components/user_card.gleam
  - module: scrumbringer_client/features/assignments/update
    path: apps/client/src/scrumbringer_client/features/assignments/update.gleam
  - module: scrumbringer_client/features/assignments/view
    path: apps/client/src/scrumbringer_client/features/assignments/view.gleam
  - module: scrumbringer_client/member_visuals
    path: apps/client/src/scrumbringer_client/member_visuals.gleam
  - module: scrumbringer_client/shared/i18n_helpers
    path: apps/client/src/scrumbringer_client/shared/i18n_helpers.gleam
  - module: scrumbringer_client/ui/layout
    path: apps/client/src/scrumbringer_client/ui/layout.gleam
  - module: scrumbringer_client/ui/loading
    path: apps/client/src/scrumbringer_client/ui/loading.gleam
  - module: scrumbringer_client/ui/badge
    path: apps/client/src/scrumbringer_client/ui/badge.gleam
  - module: scrumbringer_client/ui/color_picker
    path: apps/client/src/scrumbringer_client/ui/color_picker.gleam
  - module: scrumbringer_client/ui/card_state
    path: apps/client/src/scrumbringer_client/ui/card_state.gleam
  - module: scrumbringer_client/ui/card_tabs
    path: apps/client/src/scrumbringer_client/ui/card_tabs.gleam
  - module: scrumbringer_client/ui/copyable_input
    path: apps/client/src/scrumbringer_client/ui/copyable_input.gleam
  - module: scrumbringer_client/ui/dialog
    path: apps/client/src/scrumbringer_client/ui/dialog.gleam
  - module: scrumbringer_client/ui/expand_toggle
    path: apps/client/src/scrumbringer_client/ui/expand_toggle.gleam
  - module: scrumbringer_client/ui/icons
    path: apps/client/src/scrumbringer_client/ui/icons.gleam
  - module: scrumbringer_client/ui/modal_close_button
    path: apps/client/src/scrumbringer_client/ui/modal_close_button.gleam
  - module: scrumbringer_client/ui/note_dialog
    path: apps/client/src/scrumbringer_client/ui/note_dialog.gleam
  - module: scrumbringer_client/ui/notes_tabs
    path: apps/client/src/scrumbringer_client/ui/notes_tabs.gleam
  - module: scrumbringer_client/ui/tabs
    path: apps/client/src/scrumbringer_client/ui/tabs.gleam
  - module: scrumbringer_client/ui/task_item
    path: apps/client/src/scrumbringer_client/ui/task_item.gleam
  - module: scrumbringer_client/ui/task_tabs
    path: apps/client/src/scrumbringer_client/ui/task_tabs.gleam
  - module: scrumbringer_client/ui/confirm_dialog
    path: apps/client/src/scrumbringer_client/ui/confirm_dialog.gleam
  - module: scrumbringer_client/ui/task_status_utils
    path: apps/client/src/scrumbringer_client/ui/task_status_utils.gleam
  - module: scrumbringer_client/ui/task_blocked_badge
    path: apps/client/src/scrumbringer_client/ui/task_blocked_badge.gleam
  - module: scrumbringer_client/ui/card_badge
    path: apps/client/src/scrumbringer_client/ui/card_badge.gleam
  - module: scrumbringer_client/ui/css_class
    path: apps/client/src/scrumbringer_client/ui/css_class.gleam
  - module: scrumbringer_client/ui/empty_state
    path: apps/client/src/scrumbringer_client/ui/empty_state.gleam
  - module: scrumbringer_client/ui/error_banner
    path: apps/client/src/scrumbringer_client/ui/error_banner.gleam
  - module: scrumbringer_client/ui/event_decoders
    path: apps/client/src/scrumbringer_client/ui/event_decoders.gleam
  - module: scrumbringer_client/ui/icon_catalog
    path: apps/client/src/scrumbringer_client/ui/icon_catalog.gleam
  - module: scrumbringer_client/ui/icon_picker
    path: apps/client/src/scrumbringer_client/ui/icon_picker.gleam
  - module: scrumbringer_client/ui/toast
    path: apps/client/src/scrumbringer_client/ui/toast.gleam
  - module: scrumbringer_client/ui/task_type_icon
    path: apps/client/src/scrumbringer_client/ui/task_type_icon.gleam
  - module: scrumbringer_client/ui/task_color
    path: apps/client/src/scrumbringer_client/ui/task_color.gleam
  - module: scrumbringer_client/ui/section_header
    path: apps/client/src/scrumbringer_client/ui/section_header.gleam
  - module: scrumbringer_client/ui/notes_composer
    path: apps/client/src/scrumbringer_client/ui/notes_composer.gleam
  - module: scrumbringer_client/ui/tooltips/author_tooltip
    path: apps/client/src/scrumbringer_client/ui/tooltips/author_tooltip.gleam
  - module: scrumbringer_client/ui/tooltips/notes_preview_tooltip
    path: apps/client/src/scrumbringer_client/ui/tooltips/notes_preview_tooltip.gleam
  - module: scrumbringer_client/ui/tooltips/progress_tooltip
    path: apps/client/src/scrumbringer_client/ui/tooltips/progress_tooltip.gleam
  - module: scrumbringer_client/ui/tooltips/tab_badge
    path: apps/client/src/scrumbringer_client/ui/tooltips/tab_badge.gleam
  - module: scrumbringer_client/ui/tooltips/types
    path: apps/client/src/scrumbringer_client/ui/tooltips/types.gleam
  - module: scrumbringer_client/ui/action_buttons
    path: apps/client/src/scrumbringer_client/ui/action_buttons.gleam
  - module: scrumbringer_client/ui/card_detail_host
    path: apps/client/src/scrumbringer_client/ui/card_detail_host.gleam
  - module: scrumbringer_client/ui/card_meta
    path: apps/client/src/scrumbringer_client/ui/card_meta.gleam
  - module: scrumbringer_client/ui/card_progress
    path: apps/client/src/scrumbringer_client/ui/card_progress.gleam
  - module: scrumbringer_client/ui/card_section_header
    path: apps/client/src/scrumbringer_client/ui/card_section_header.gleam
  - module: scrumbringer_client/ui/card_state_badge
    path: apps/client/src/scrumbringer_client/ui/card_state_badge.gleam
  - module: scrumbringer_client/ui/card_title_meta
    path: apps/client/src/scrumbringer_client/ui/card_title_meta.gleam
  - module: scrumbringer_client/ui/data_table
    path: apps/client/src/scrumbringer_client/ui/data_table.gleam
  - module: scrumbringer_client/ui/error_notice
    path: apps/client/src/scrumbringer_client/ui/error_notice.gleam
  - module: scrumbringer_client/ui/form_field
    path: apps/client/src/scrumbringer_client/ui/form_field.gleam
  - module: scrumbringer_client/ui/info_callout
    path: apps/client/src/scrumbringer_client/ui/info_callout.gleam
  - module: scrumbringer_client/ui/modal_header
    path: apps/client/src/scrumbringer_client/ui/modal_header.gleam
  - module: scrumbringer_client/ui/notes_list
    path: apps/client/src/scrumbringer_client/ui/notes_list.gleam
  - module: scrumbringer_client/ui/remote
    path: apps/client/src/scrumbringer_client/ui/remote.gleam
  - module: scrumbringer_client/ui/task_actions
    path: apps/client/src/scrumbringer_client/ui/task_actions.gleam
  - module: scrumbringer_client/ui/task_state
    path: apps/client/src/scrumbringer_client/ui/task_state.gleam
  - module: scrumbringer_client/ui/search_select
    path: apps/client/src/scrumbringer_client/ui/search_select.gleam
  - module: scrumbringer_client/ui/task_hover_popup
    path: apps/client/src/scrumbringer_client/ui/task_hover_popup.gleam
  - module: scrumbringer_client/permissions
    path: apps/client/src/scrumbringer_client/permissions.gleam
  - module: scrumbringer_client/client_update_dispatch
    path: apps/client/src/scrumbringer_client/client_update_dispatch.gleam
  - module: scrumbringer_client/domain/ids
    path: apps/client/src/scrumbringer_client/domain/ids.gleam
  - module: scrumbringer_client/utils/text
    path: apps/client/src/scrumbringer_client/utils/text.gleam
  - module: scrumbringer_client/utils/format_date
    path: apps/client/src/scrumbringer_client/utils/format_date.gleam
  - module: scrumbringer_client/utils/card_queries
    path: apps/client/src/scrumbringer_client/utils/card_queries.gleam
  - module: scrumbringer_client/url_state
    path: apps/client/src/scrumbringer_client/url_state.gleam
  - module: scrumbringer_client/client_state
    path: apps/client/src/scrumbringer_client/client_state.gleam
  - module: scrumbringer_client/accept_invite
    path: apps/client/src/scrumbringer_client/accept_invite.gleam
  - module: scrumbringer_client/hydration
    path: apps/client/src/scrumbringer_client/hydration.gleam
  - module: scrumbringer_client/reset_password
    path: apps/client/src/scrumbringer_client/reset_password.gleam
  - module: scrumbringer_client/client_update
    path: apps/client/src/scrumbringer_client/client_update.gleam
  - module: scrumbringer_client
    path: apps/client/src/scrumbringer_client.gleam
  - module: domain/api_error
    path: shared/src/domain/api_error.gleam
  - module: domain/capability
    path: shared/src/domain/capability.gleam
  - module: domain/org
    path: shared/src/domain/org.gleam
  - module: domain/org_role
    path: shared/src/domain/org_role.gleam
  - module: domain/task_status
    path: shared/src/domain/task_status.gleam
  - module: domain/user
    path: shared/src/domain/user.gleam
  - module: domain/field_update
    path: shared/src/domain/field_update.gleam
  - module: domain/project
    path: shared/src/domain/project.gleam
  - module: domain/project_role
    path: shared/src/domain/project_role.gleam
  - module: domain/task_type
    path: shared/src/domain/task_type.gleam
  - module: domain/view_mode
    path: shared/src/domain/view_mode.gleam
  - module: domain/workflow
    path: shared/src/domain/workflow.gleam
  - module: domain/metrics
    path: shared/src/domain/metrics.gleam
  - module: domain/card
    path: shared/src/domain/card.gleam
  - module: domain/link_detection
    path: shared/src/domain/link_detection.gleam
  - module: domain/remote
    path: shared/src/domain/remote.gleam
  - module: domain/task
    path: shared/src/domain/task.gleam
  - module: shared
    path: shared/src/shared.gleam
  - module: helpers/json
    path: shared/src/helpers/json.gleam
  - module: helpers/option
    path: shared/src/helpers/option.gleam

modules:
  - module: shared/domain/task_status
    path: shared/src/domain/task_status.gleam
    package: shared
    layer: domain
    stability: stable
    module_purpose: "Representación segura de estados de tareas y transiciones."
    responsibilities:
      primary: "Definir ADTs TaskStatus y ClaimedState."
      secondary: ["Parsers de strings para DB/API.", "Helpers de consulta de estado."]
    public_api:
      types:
        - name: TaskStatus
          kind: adt
          visibility: pub
          role: "Enum principal: Available, Claimed(ClaimedState), Completed."
        - name: WorkState
          kind: adt
          visibility: pub
          role: "Enum aplanado para UI."
      functions:
        - name: from_db
          visibility: pub
          signature: "(String, Bool) -> TaskStatus"
          capability: "Mapear columnas de DB a ADT."
          effects: [pure]
          error_model: "None (fallback defensivo)"
          tags: [persistence]
    capabilities:
      - name: "Normalización de Estado"
        description: "Unifica la representación string/bool de DB en un ADT seguro."
        entrypoints: [from_db, parse_task_status]
        inputs_outputs: "String -> Result(TaskStatus, String)"
        invariants: ["Claimed(Ongoing) implica is_ongoing=True"]
        tags: [validation]
        example: |
          let status = task_status.from_db("claimed", True)
          // -> Claimed(Ongoing)
    dependencies:
      internal: []
      external: []
    refactor_signals:
      - kind: overlap
        severity: medium
        evidence: "WorkState duplica variantes de TaskStatus en estructura plana."
        suggested_action: "Unificar o implementar mapeo explícito WorkState -> TaskStatus."
    decisions:
      - "Usar ADTs para eliminar errores de comparación de strings."
    tests:
      present: unknown
      notes: "Probablemente cubierto por tests de integración."

  - module: support/store
    path: apps/server/test/support/store.gleam
    package: scrumbringer_server
    layer: test-support
    stability: experimental
    module_purpose: "Actor en memoria volátil para estado de auth en tests."
    responsibilities:
      primary: "Gestionar estado de usuarios e invitaciones mock."
      secondary: ["Manejar mensajes asíncronos del actor."]
    public_api:
      types:
        - name: Store
          kind: opaque
          visibility: pub
          role: "Wrapper del Subject del actor."
      functions:
        - name: start
          visibility: pub
          signature: "() -> Store"
          capability: "Spawn del actor."
          effects: [io, concurrency]
          error_model: "Panic en fallo crítico"
          tags: [otp]
    capabilities:
      - name: "Persistencia Mock"
        description: "Almacén thread-safe en memoria usando actores OTP."
        entrypoints: [register, login, get_user]
        inputs_outputs: "Msg -> Result(User, Error)"
        invariants: ["Unicidad de email mantenida en el estado del actor."]
        tags: [state-machine]
        example: |
          let store = store.start()
          let _ = store.register(store, "a@b.com", "pass", ...)
    dependencies:
      internal: [scrumbringer_server/services/auth_logic, scrumbringer_server/services/store_state]
      external: [gleam_otp]
    refactor_signals:
      - kind: dead_code_suspected
        severity: low
        evidence: "Marcado como test-only; potencialmente redundante si se usan mocks de DB."
        suggested_action: "Consolidar en helpers de test."
    decisions:
      - "Usar patrón actor para estado volátil thread-safe."
    tests:
      present: yes
      notes: "Usado como backing store para suites de test del servidor."

  - module: scrumbringer_server/services/rules_engine
    path: apps/server/src/scrumbringer_server/services/rules_engine.gleam
    package: scrumbringer_server
    layer: application
    stability: evolving
    module_purpose: "Orquestar automatización de workflows y creación de tareas."
    responsibilities:
      primary: "Evaluar reglas contra cambios de estado."
      secondary: ["Implementar idempotencia vía logs en DB.", "Sustituir variables en templates."]
    public_api:
      types:
        - name: StateChange
          kind: adt
          visibility: pub
          role: "Payload de evento: TaskChange o CardChange."
      functions:
        - name: evaluate_rules
          visibility: pub
          signature: "(Connection, StateChange) -> Result(List(RuleResult), Error)"
          capability: "Ejecutar reglas coincidentes."
          effects: [db, io]
          error_model: "Result con error de DB"
          tags: [orchestration]
    capabilities:
      - name: "Sustitución de Variables"
        description: "Inyectar contexto en los templates de tareas."
        entrypoints: [substitute_variables]
        inputs_outputs: "String -> String"
        invariants: ["Reemplaza {{father}}, {{user}}, etc."]
        tags: [formatting]
        example: |
          let title = rules_engine.substitute_variables("Fix {{father}}", event, ..)
    dependencies:
      internal: [scrumbringer_server/sql, scrumbringer_server/services/rules_target]
      external: [pog]
    refactor_signals:
      - kind: god_module
        severity: medium
        evidence: "Maneja logging, sustitución de variables, interacción con DB y lógica de evaluación."
        suggested_action: "Extraer sustitución de variables a un módulo separado."
    decisions:
      - "Asegurar idempotencia mediante check_already_executed."
    tests:
      present: yes
      notes: "Crítico para la fiabilidad de los workflows."

cross_module_analysis:
  hotspots:
    - theme: "Rules & Workflows"
      tags: [orchestration, state-machine]
      involved_modules: [scrumbringer_server/services/rules_engine, scrumbringer_server/services/workflows_db, shared/domain/workflow]
      why_it_matters: "Interacción compleja entre triggers de eventos y lógica almacenada en DB."
      consolidation_candidate: "Servicio unificado de evaluación de reglas."
  overlaps:
    - capability_theme: "Mapeo de Estado"
      suspected_duplicates:
        - module: shared/domain/task_status
          symbols: [WorkState, TaskStatus]
        - module: scrumbringer_server/services/workflows/types
          symbols: [parse_task_status, task_status_to_db]
      recommended_resolution: "Centralizar todo el parseo/mapeo de estados en shared/domain/task_status."
  simplification_opportunities:
    - title: "ADT-based Persistence"
      scope: [scrumbringer_server/services/password_resets_db]
      change: "Reemplazar campos Option correlacionados por ADTs de estado explícitos en resets de password."
      risk: medium

adt_opportunities:
  - location:
      module: scrumbringer_server/services/org_invite_links_db
      path: apps/server/src/scrumbringer_server/services/org_invite_links_db.gleam
      type_or_function: OrgInviteLink
    current_representation: "OrgInviteLink con lifecycle: InviteLinkLifecycle (Active/Used/Invalidated con timestamps)."
    evidence:
      - "Refactor aplicado: lifecycle encapsula timestamps y estado."
    illegal_states_currently_possible: []
    proposed_adt:
      name: InviteLinkLifecycle
      definition: |
        pub type InviteLinkLifecycle {
          Active(created_at: String)
          Used(created_at: String, used_at: String)
          Invalidated(created_at: String, invalidated_at: String)
        }
      replaces_or_wraps: OrgInviteLink
    migration:
      approach:
        - "Implementado: parse_lifecycle y helpers de lifecycle."
        - "Refactorizados handlers dependientes."
      risk: low
      impacted_modules: [scrumbringer_server/http/org_invite_links]
    benefits: ["Eliminar Options correlacionados.", "Pattern matching exhaustivo sobre el estado del link."]
    tags: [domain-model]

otp_topology:
  present: yes
  runtime: beam
  entrypoints:
    - module_or_file: apps/server/src/main.gleam
      start_function: main
      notes: "Inicia el servidor Mist/Wisp y el pool de pgo."
  supervisors:
    - name: "pgo_pool_sup"
      module: pgo
      path: unknown
      strategy: one_for_all
      intensity: "Configuración estándar de pgo"
      purpose: "Gestionar el pool de conexiones PostgreSQL."
      children_static:
        - id: "pgo_pool"
          kind: worker
          module: pgo
          notes: "Workers de base de datos."
      children_dynamic: []
  workers:
    - name: "StoreActor"
      module: support/store
      path: apps/server/test/support/store.gleam
      purpose: "Almacén de auth mock para tests."
      process_style: gen_server_like
      registered_as: none
      state_summary: "Dicts de usuarios e invitaciones."
      resources_held: [memory]
      public_interface: [register, login, get_user]
      message_protocol:
        receives: [Register, Login, GetUser, InsertInvite]
        sends: [Result(User, Error)]
        timers_timeouts: []
      restart_semantics:
        loses_state_on_restart: yes
        idempotent_on_retry: no
      otp_refactor_signals:
        - kind: unsafe_restart_semantics
          severity: low
          evidence: "Helper de test no supervisado."
          suggested_action: "Ninguna (solo test)."

otp_adt_opportunities:
  - location:
      worker: StoreActor
      module: support/store
    illegal_states:
      - "Mensaje Register con now_iso y now_unix inconsistentes."
    proposed_adt:
      name: RegistrationContext
      definition: |
        pub type RegistrationContext {
          RegistrationContext(email: String, timestamp: Timestamp)
        }
    migration:
      approach: ["Envolver campos de tiempo en un ADT Timestamp."]
      risk: low
    benefits: ["Consistencia atómica del tiempo."]
